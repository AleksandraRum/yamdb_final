# yamdb_final
yamdb_final
# Спринт 16. Проект Yamdb

## Статус Workflow

![badge](https://github.com/AleksandraRum/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg)

## Описание:
YaMDb — это платформа, на которой пользователи могут оставлять отзывы и выставлять оценки различным произведениям: книгам, фильмам, музыкальным композициям и другим формам искусства.

Проект не хранит сами произведения — он собирает и агрегирует мнения пользователей, формируя рейтинг на основе оценок.

Основной функционал:
	•	Произведения (Titles) делятся на категории (например, Книги, Фильмы, Музыка). Категории может добавлять администратор.
	•	Каждому произведению можно присвоить один или несколько жанров (Фэнтези, Детектив, Рок, Артхаус и т. д.).
	•	Пользователи могут:
	•	Зарегистрироваться и пройти верификацию по email.
	•	Оставлять отзывы (Review) с текстом и оценкой от 1 до 10.
	•	Комментировать отзывы других пользователей.
	•	На одно произведение можно оставить только один отзыв от одного пользователя.
	•	Из пользовательских оценок автоматически рассчитывается рейтинг произведения.

## Команда разработки:
- Андрей Бондаренко
- Александра Румянцева
- Александр Яковлев

## Стек технологий:

    •	Python 3.10+
	•	Django 4.x — основной фреймворк для веб-приложения
	•	Django REST Framework — создание RESTful API
	•	Simple JWT — аутентификация с помощью токенов
	•	PostgreSQL — база данных
	•	Docker — контейнеризация приложения
	•	Gunicorn — WSGI-сервер для запуска проекта
	•	Nginx (опционально) — прокси-сервер (если используется)
	•	Yandex SMTP / Gmail SMTP — отправка email-сообщений
	•	drf-yasg — генерация Swagger / ReDoc-документации
	•	Render — деплой проекта
	•	GitHub Actions — CI/CD: тесты, сборка и деплой

## Запуск проекта в контейнере:

### Предварительные требования
	•	Установлен Docker
	•	Установлен Git

1. Клонировать репозиторий:
```
https://github.com/AleksandraRum/yamdb_final.git
```
```
cd yamdb_final/infra
```

2. Создайте .env-файл:

В папке infra создайте файл .env со следующим содержанием:

```
SECRET_KEY=тут_секретный_ключ_из_Django

DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_HOST=db
DB_PORT=5432

DJANGO_SUPERUSER_USERNAME=admin
DJANGO_SUPERUSER_EMAIL=admin@example.com
DJANGO_SUPERUSER_PASSWORD=adminadmin
```

Как сгенерировать ключ:
	1.	Перейдите на сайт: https://djecrety.ir
	2.	Нажмите кнопку Generate (или Сгенерировать)
	3.	Скопируйте полученное значение
	4.	Добавьте его в ваш .env файл

3.	Запустите проект:
```
docker-compose up --build
```

6. Чтобы проверить работоспособность проекта:

```
http://localhost/admin/
```

Логин: admin
Пароль: adminadmin (или тот, что вы указали в .env)

## Деплой на Render

Проект автоматически деплоится на Render при каждом пуше в ветку master благодаря настройке CI/CD через GitHub Actions.

Что происходит при автодеплое:
	- При пуше в master срабатывает GitHub Actions Workflow
	- Прогоняются тесты: проверка кода через flake8, запуск тестов через pytest
	- Если тесты пройдены, происходит автоматическая сборка Docker-образа
	- Render перезапускает сервис, подтягивая новое приложение
	- База данных, секреты (ключи) и прочие настройки уже хранятся в окружении Render

### Проект доступен по адресу:
```
https://yamdb-final.onrender.com/admin/
```

### Документация по API доступна по адресу:
```
https://yamdb-final.onrender.com/swagger/
```

### Процесс авторизации по JWT токену:

1. Перейти по адресу для регистрации и ввести данные:
```
https://yamdb-final.onrender.com/api/v1/auth/signup/
```

2. На вашу почту придет письмо с кодом для получения токена. Ваш логин и токен нужно ввести по адресу:
```
https://yamdb-final.onrender.com/api/v1/auth/token/
```

3. Здесь же отобразится токен, который надо ввести в поле Authorize в документации Swagger для дальнейшей работы как обычный пользователь.

### Возможности пользователей и администратора

1. Что могут делать обычные пользователи:

	- Зарегистрироваться и получить токен для авторизации.
	- Получать список:
	•	Произведений (Titles)
	•	Жанров (Genres)
	•	Категорий (Categories)
	- Оставлять отзыв (Review) на произведение.
	- Оставлять комментарии (Comment) к отзывам других пользователей.
	- Просматривать чужие отзывы и комментарии.

⸻

2. Что могут делать только администраторы:

	- Управлять пользователями:
	- Просматривать список всех пользователей.
	- Изменять данные любого пользователя.
	- Создавать новых пользователей.
	- Удалять пользователей.
	- Создавать, изменять и удалять:
	•	Произведения (Titles)
	•	Жанры (Genres)
	•	Категории (Categories)
	- Получать доступ ко всем объектам без ограничений.
